<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tenant Dashboard - Home Maintenance System</title>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: Arial, sans-serif; 
            display: flex; 
            background: #f4f6f9; 
            min-height: 100vh; 
            color: #333; 
        }

        /* Sidebar */
        .sidebar { 
            width: 240px; 
            background: #2c3e50; 
            color: #fff; 
            display: flex; 
            flex-direction: column; 
            justify-content: space-between; 
            padding: 20px; 
        }
        .sidebar h2 { text-align: center; margin-bottom: 30px; color: #ecf0f1; }
        .sidebar a { color: #ecf0f1; text-decoration: none; padding: 12px; border-radius: 8px; display: block; margin: 8px 0; transition: 0.3s; }
        .sidebar a:hover, .sidebar a.active { background: #34495e; }

        /* Main Section */
        .main { flex: 1; display: flex; flex-direction: column; padding: 20px; }

        .top-bar { display: flex; justify-content: space-between; align-items: center; background: #fff; padding: 10px 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 20px; }

        .search-bar { display: flex; align-items: center; background: #ecf0f1; border-radius: 8px; padding: 5px 10px; }
        .search-bar input { border: none; outline: none; background: none; padding: 5px; width: 200px; }

        .user-logo { width: 40px; height: 40px; border-radius: 50%; cursor: pointer; border: 2px solid #3498db; }

        /* Stats */
        .stats { display: flex; gap: 20px; margin: 20px 0; }
        .card { flex: 1; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center; }
        .card h3 { color: #2c3e50; margin-bottom: 10px; }
        .card p { font-size: 32px; font-weight: bold; color: #3498db; }

        /* Table Section */
        .content-section { background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px 15px; border-bottom: 1px solid #ddd; }
        th { background: #2c3e50; color: #fff; }
        tr:hover { background: #f8f9fa; }

        /* Status Badges */
        .status-badge { padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: bold; }
        .status-pending { background: #fff3cd; color: #856404; }
        .status-completed { background: #d4edda; color: #155724; }
        .status-in-progress { background: #cfe2ff; color: #084298; }

        footer { text-align: center; margin-top: auto; padding: 15px; font-size: 14px; color: #777; }
    </style>
</head>

<body>

    <!-- Sidebar -->
    <div class="sidebar">
        <div>
            <h2>Tenant Panel</h2>

            <a href="{{ url_for('tenant_dashboard') }}" class="active">Dashboard</a>
            <a href="{{ url_for('submit_request') }}">Submit Request</a> 
            <a href="{{ url_for('tenant_all_requests') }}">My Requests</a>
            <!-- Removed Profile link as it doesn't exist -->
        </div>

        <div>
            <a href="{{ url_for('logout') }}">Logout</a>
        </div>
    </div>

    <!-- Main Body -->
    <div class="main">

        <!-- Top Bar -->
        <div class="top-bar">
            <form action="{{ url_for('tenant_dashboard') }}" method="GET" class="search-bar">
                <input type="text" name="search" placeholder="Search your requests..." value="{{ search }}">
            </form>

            <div class="user-actions">
                <img src="https://cdn-icons-png.flaticon.com/512/847/847969.png" alt="User" class="user-logo" />
            </div>
        </div>

        <!-- Stats -->
        <div class="stats">
            <div class="card">
                <h3>Total Submitted</h3>
                <p>{{ total }}</p>
            </div>

            <div class="card">
                <h3>In Progress</h3>
                <p>{{ in_progress }}</p>
            </div>

            <div class="card">
                <h3>Completed</h3>
                <p>{{ completed }}</p>
            </div>
        </div>

        <!-- Recent Requests -->
        <div class="content-section">
            <h2>Recent Requests</h2>

            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Request</th>
                        <th>Status</th>
                        <th>Date</th>
                        <th>Action</th>
                    </tr>
                </thead>

                <tbody>
                    {% if recent %}
                        {% for req in recent %}
                        <tr>
                            <td>{{ req.id }}</td>
                            <td>{{ req.title }}</td>

                            <td>
                                {% if req.status == "Pending" %}
                                    <span class="status-badge status-pending">Pending</span>
                                {% elif req.status == "Completed" %}
                                    <span class="status-badge status-completed">Completed</span>
                                {% else %}
                                    <span class="status-badge status-in-progress">In Progress</span>
                                {% endif %}
                            </td>

                            <td>{{ req.date }}</td>

                            <td>
                                <a href="{{ url_for('view_single_request', req_id=req.id) }}">View</a>
                            </td>
                        </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="5" style="text-align:center; color:#888;">No requests found.</td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>

        <footer>
            <p>&copy; 2025 Tenant Dashboard - Home Maintenance System</p>
        </footer>

    </div>

</body>
</html>
